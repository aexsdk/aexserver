<?php	/* * 执行操: 自动入库 * */api_action($api_object);function get_message_callback($api_obj,$context,$msg){	return sprintf($msg,$api_obj->return_code, $api_obj->return_data['pno']);}/*	写回应信息的回调函数，设置了此函数会覆盖默认的输出方式，此函数只需要返回结果，输出由调用函数负责。*/function write_response_callback($api_obj,$context){	$resp = $api_obj->write_return_xml();	return $resp;}function api_action($api_obj){	require_once $api_obj->params['common-path'].'/api_wfs_db.php';	$wfs_db = new class_wfs_db($api_obj->config->new_wfs_db_config, $api_obj);	$api_obj->set_callback_func ( get_message_callback, write_response_callback, $wfs_db );	$imei = $_REQUEST['imei'];    	$bsn = $_REQUEST['bsn']; 	$pno = $_REQUEST['pno']; 	$ep	= $_REQUEST['ep']; 	$action = $_REQUEST['o_action']; 	try {		if ($action == 'update_active_info') {			$params_array = array(				$bsn,				$imei,				$pno,				$ep			);			$rdata = $wfs_db->update_active_info($params_array);			echo $rdata;		}else if($action == 'update_wfs'){			$params_array = array(				$imei,				$carrier_name			);			$rdata = $wfs_db->web_stock_update($params_array);			echo $rdata;		}else{			echo 0;		}	} catch ( Exception $e ) {		$rows = $e->getMessage ();	}}?>